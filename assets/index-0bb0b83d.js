import{T as b,b as c,h as L}from"./index-a0e63793.js";import{b as f,y as r,f as l,h as w,e as x,d as D,n as g,E as j,k as I}from"./vendor-0a736001.js";import{a as T,d as S,e as N,f as U,h as z,i as B}from"./locker-15f4533c.js";const F="";var Y=Object.defineProperty,E=Object.getOwnPropertyDescriptor,v=(e,s,n,o)=>{for(var t=o>1?void 0:o?E(s,n):s,i=e.length-1,a;i>=0;i--)(a=e[i])&&(t=(o?a(s,n,t):a(t))||t);return o&&t&&Y(s,n,t),t};let d=class extends b(F){constructor(){super(...arguments),this.bindBridge=new f(this,c),this.name="",this.limit="0",this.inviteCode="",this.genInviteCode=async()=>{try{let e=await T();e&&(this.inviteCode=e)}catch(e){}}}get bridge(){return c.bridge}get inviteLink(){return`https://lockpass.doid.tech/?ic=${this.inviteCode}`}async connectedCallback(){super.connectedCallback(),this.limit=await S()}get shareText(){return`DOID lock name event is live. Mint your lock pass NFT for free and reserve your desired name now. Get invitation here: ${this.inviteLink}`}render(){return r`<p class="text-sm text-gray-500">You have <b>${this.limit}</b> invitations in total. Copy the invitation code or share the link.</p><div class="py-2">${this.inviteCode?r`<textarea class="block w-full h-24 my-3 border border-solid border-gray-200 py-2 px-2 text-gray-400" readonly="readonly">
${this.shareText}</textarea><dui-copy value="${this.shareText}" sm class="outlined"><span slot="copied">Copy<i class="ml-1 mdi mdi-check text-green-600"></i></span><span slot="copy">Copy<i class="ml-1 mdi mdi-content-copy"></i></span></dui-copy>`:+this.limit>0?r`<dui-button sm @click="${this.genInviteCode}">Share</dui-button>`:r``}</div>`}};v([w()],d.prototype,"name",2);v([l()],d.prototype,"limit",2);v([l()],d.prototype,"inviteCode",2);d=v([x("pass-share")],d);const M=`:root{--posterSize: 90px}.pass{position:relative;min-height:8.5rem;display:flex;gap:1rem;border-width:1px;--tw-border-opacity: 1;border-color:rgba(209,213,219,var(--tw-border-opacity));padding:1rem}.pass .poster{margin-bottom:1rem;width:90px;width:var(--posterSize);height:90px;height:var(--posterSize)}.pass .poster:not(.minted){--tw-bg-opacity: 1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.pass .name.locked{font-size:1rem;line-height:1.5rem}.pass .status.locked{--tw-text-opacity: 1;color:rgba(22,163,74,var(--tw-text-opacity))}.pass .status.unlock{--tw-text-opacity: 1;color:rgba(107,114,128,var(--tw-text-opacity))}.pass .status.minted{--tw-text-opacity: 1;color:rgba(96,165,250,var(--tw-text-opacity))}
`;var R=Object.defineProperty,V=Object.getOwnPropertyDescriptor,y=(e,s,n,o)=>{for(var t=o>1?void 0:o?V(s,n):s,i=e.length-1,a;i>=0;i--)(a=e[i])&&(t=(o?a(s,n,t):a(t))||t);return o&&t&&R(s,n,t),t};let m=class extends b(M){constructor(){super(...arguments),this.bindBridge=new f(this,c),this.item={},this.tx=null,this.success=!1}get bridge(){return c.bridge}get scan(){return this.bridge.network.current.scan}get tokenLink(){return`${this.scan}/token/${L("Locker")}?a=${this.item.id}`}firstUpdate(){}render(){let e="",s="";return this.item.name?(e="locked",s="Locked"):(e="unlock",s="No name locked yet"),r`<div class="pass"><div class="poster ${D({minted:this.item.meta.image})}"><img src="${this.item.meta.image}" class="object-contain"></div><div class="flex flex-col justify-between text-xs"><div><span class="text-base">#${this.item.id}</span><p><dui-link class="text-black uri" href="${this.tokenLink}" target="_blank">View on etherscan</dui-link></p></div><div><div class="status ${e}">${s}</div>${g(this.item.name,()=>r`<div class="name ${e}"><b class="text-blue-600">${this.item.name}</b>.doid</div>`,()=>r`<div class="actions mt-2"><dui-button href="/?pid=${this.item.id}" sm>Lock a name</dui-button></div>`)}</div></div></div>`}};y([w({type:Object})],m.prototype,"item",2);y([l()],m.prototype,"tx",2);y([l()],m.prototype,"success",2);m=y([x("pass-item")],m);const A=`.Passes{height:300px;height:100%;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.pass-list{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));grid-gap:1rem;gap:1rem}@media (min-width: 1024px){.pass-list{grid-template-columns:repeat(2,minmax(0,1fr))}}
`;var G=Object.defineProperty,H=Object.getOwnPropertyDescriptor,h=(e,s,n,o)=>{for(var t=o>1?void 0:o?H(s,n):s,i=e.length-1,a;i>=0;i--)(a=e[i])&&(t=(o?a(s,n,t):a(t))||t);return o&&t&&G(s,n,t),t};let p=class extends b(A){constructor(){super(...arguments),this.bindBridge=new f(this,c),this.name="",this.passes=[],this.pending=!1,this.ts=0}get bridge(){return c.bridge}async getUserPassList(){if(c.notReady)return;this.pending=!0;const{account:e}=c.bridge,s=await N();try{const n=await U(e,!0),o=await z();let t=await Promise.all(n.map(async i=>{var _;const[a,O,$]=i,k=j(a,0),P=(_=o[O])!=null?_:[],u={id:k,cate:P[0],hash:$,meta:{}},C=await Promise.all([B($),s.tokenURI(k)]);u.name=C[0],u.len=`${P[1]}`;try{u.meta=await(await fetch(C[1])).json()}catch(q){}return u}));this.passes=t.sort((i,a)=>i.id-a.id).sort((i,a)=>i.name?a.name?i.id-a.id:-1:1)}catch(n){console.log(n,"get passess failed"),this.passes=[]}finally{this.ts++,this.pending=!1}}get empty(){return this.ts&&!this.passes.length}connectedCallback(){super.connectedCallback(),this.getUserPassList()}render(){return r`<div class="passes py-4"><div class="lg_w-3/5 my-8 mx-3 lg_mx-auto"><section><p class="text-base mb-2">Note</p><ul class="note list-disc mx-4"><li>You can only mint one Lock Pass for one wallet address.</li><li>Once you successfully locked your name. Your name will be reserved for 7 days after the official launch(22nd Dec,2022). Those locked but unminted names will be released to the public pool afterwards.</li></ul><a href="${"https://twitter.com/DoidFoundation"}" target="_blank" rel="noopener" class="uri inline-flex my-2 text-base">Follow DOID Twitter and stay connected</a></section>${g(c.noAccount,()=>r`<div class="my-8 text-center"><connect-wallet-btn></connect-wallet-btn></div>`,()=>r`<section class="mt-6"><h2 class="my-4 text-xl">My Lock Pass</h2><div class="py-4">${g(this.empty,()=>r`No passes yet.`,()=>r`${g(this.pending,()=>r`<i class="mdi mdi-loading mr-1"></i>Loading...`,()=>r`<div class="pass-list">${I(this.passes,e=>r`<pass-item key="${e.id}" .item="${e}"></pass-item>`)}</div>`)}`)}</div></section><section class="mt-6"><h2 class="text-xl mb-2">Share Lock Pass Invitations</h2>${this.passes.length?r`<pass-share></pass-share>`:r``}</section>`)}</div></div>`}};h([w()],p.prototype,"name",2);h([l()],p.prototype,"passes",2);h([l()],p.prototype,"pending",2);h([l()],p.prototype,"ts",2);p=h([x("view-passes")],p);export{p as ViewPasses};
