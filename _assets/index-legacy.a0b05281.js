System.register(["./index-legacy.ab775b20.js","./vendor-legacy.5903c84e.js","./locker-legacy.801f1e1a.js"],(function(t,e){"use strict";var i,s,a,r,o,n,c,d,p,l,h,m,g,y,u,b,v,x,w=document.createElement("style");return w.textContent=":root{--posterSize: 90px}.pass{position:relative;min-height:8.5rem;display:flex;gap:1rem;border-width:1px;--tw-border-opacity: 1;border-color:rgba(209,213,219,var(--tw-border-opacity));padding:1rem}.pass .poster{margin-bottom:1rem;width:90px;width:var(--posterSize);height:90px;height:var(--posterSize)}.pass .poster:not(.minted){--tw-bg-opacity: 1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.pass .name.locked{font-size:1rem;line-height:1.5rem}.pass .status.locked{--tw-text-opacity: 1;color:rgba(22,163,74,var(--tw-text-opacity))}.pass .status.unlock{--tw-text-opacity: 1;color:rgba(107,114,128,var(--tw-text-opacity))}.pass .status.minted{--tw-text-opacity: 1;color:rgba(96,165,250,var(--tw-text-opacity))}.Passes{height:300px;height:100%;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.pass-list{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));grid-gap:1rem;gap:1rem}@media (min-width: 1024px){.pass-list{grid-template-columns:repeat(2,minmax(0,1fr))}}\n",document.head.appendChild(w),{setters:[t=>{i=t.T,s=t.b,a=t.h},t=>{r=t.y,o=t.k,n=t.f,c=t.d,d=t.e,p=t.b,l=t.n,h=t.A,m=t.h},t=>{g=t.a,y=t.d,u=t.e,b=t.f,v=t.h,x=t.i}],execute:function(){const e={readText:()=>Promise.reject(),writeText:(t="")=>new Promise(((e,i)=>{try{const s=document,a=s.createElement("textarea");a.value=t,s.body.appendChild(a),a.value=t,s.body.appendChild(a),a.select();const r=s.execCommand("copy");s.body.removeChild(a),r?e(!0):i(!1)}catch(c){i(!1)}}))};let{clipboard:w}=navigator;w||(w=e);const k=w;var f=Object.defineProperty,$=Object.getOwnPropertyDescriptor,C=(t,e,i,s)=>{for(var a,r=s>1?void 0:s?$(e,i):e,o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&f(e,i,r),r};let P=class extends(i("")){constructor(){super(...arguments),this.value="",this.copied=!1}firstUpdated(){}async doCopy(){const t=this.value;if(t){this.copied=!1;try{await k.writeText(t),this.copied=!0}catch(e){this.copied=!1}}}get icon(){return this.copied?"mdi-check":"mdi-content-copy"}render(){return r`<dui-button sm @click="${this.doCopy}" class="outlined ${o({copied:this.copied})}">${this.copied?r`Copied`:r`Copy`} <i part="copy-icon" class="mdi ${this.icon}"></i></dui-button>`}};C([c()],P.prototype,"value",2),C([n()],P.prototype,"copied",2),P=C([d("dui-copy")],P);var j=Object.defineProperty,O=Object.getOwnPropertyDescriptor,L=(t,e,i,s)=>{for(var a,r=s>1?void 0:s?O(e,i):e,o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&j(e,i,r),r};let S=class extends(i("")){constructor(){super(...arguments),this.bindStore=new p(this,s),this.name="",this.limit="0",this.inviteCode="",this.genInviteCode=async()=>{try{let t=await g();t&&(this.inviteCode=t)}catch(c){}}}get bridge(){return s.bridge}get inviteLink(){return`https://lockpass.doid.tech/?ic=${this.inviteCode}`}async connectedCallback(){super.connectedCallback(),this.limit=await y()}get shareText(){return`DOID lock name event is live. Mint your lock pass NFT for free and reserve your desired name now. Get invitation here: ${this.inviteLink}`}render(){return r`<p class="text-sm text-gray-500">You have <b>${this.limit}</b> invitations in total. Copy the invitation code or share the link.</p><div class="py-2">${this.inviteCode?r`<textarea class="block w-full h-24 my-3 border border-solid border-gray-200 py-2 px-2 text-gray-400" readonly="readonly">
${this.shareText}</textarea><dui-copy value="${this.shareText}"></dui-copy>`:+this.limit>0?r`<dui-button sm @click="${this.genInviteCode}">Share</dui-button>`:r``}</div>`}};L([c()],S.prototype,"name",2),L([n()],S.prototype,"limit",2),L([n()],S.prototype,"inviteCode",2),S=L([d("pass-share")],S);var D=Object.defineProperty,T=Object.getOwnPropertyDescriptor,z=(t,e,i,s)=>{for(var a,r=s>1?void 0:s?T(e,i):e,o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&D(e,i,r),r};let I=class extends(i(":root{--posterSize: 90px}.pass{position:relative;min-height:8.5rem;display:flex;gap:1rem;border-width:1px;--tw-border-opacity: 1;border-color:rgba(209,213,219,var(--tw-border-opacity));padding:1rem}.pass .poster{margin-bottom:1rem;width:90px;width:var(--posterSize);height:90px;height:var(--posterSize)}.pass .poster:not(.minted){--tw-bg-opacity: 1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.pass .name.locked{font-size:1rem;line-height:1.5rem}.pass .status.locked{--tw-text-opacity: 1;color:rgba(22,163,74,var(--tw-text-opacity))}.pass .status.unlock{--tw-text-opacity: 1;color:rgba(107,114,128,var(--tw-text-opacity))}.pass .status.minted{--tw-text-opacity: 1;color:rgba(96,165,250,var(--tw-text-opacity))}\n")){constructor(){super(...arguments),this.bindStore=new p(this,s),this.item={},this.tx=null,this.success=!1}get bridge(){return s.bridge}get scan(){return this.bridge.network.current.scan}get tokenLink(){return`${this.scan}/token/${a("Locker")}?a=${this.item.id}`}firstUpdate(){}render(){let t="",e="";return this.item.name?(t="locked",e="Locked"):(t="unlock",e="No name locked yet"),r`<div class="pass"><div class="poster ${o({minted:this.item.meta.image})}"><img src="${this.item.meta.image}" class="object-contain"></div><div class="flex flex-col justify-between text-xs"><div><span class="text-base">#${this.item.id}</span><p><dui-link class="text-black uri" href="${this.tokenLink}" target="_blank">View on etherscan</dui-link></p></div><div><div class="status ${t}">${e}</div>${l(this.item.name,(()=>r`<div class="name ${t}"><b class="text-blue-600">${this.item.name}</b>.doid</div>`),(()=>r`<div class="actions mt-2"><dui-button href="/?pid=${this.item.id}" sm>Lock a name</dui-button></div>`))}</div></div></div>`}};z([c({type:Object})],I.prototype,"item",2),z([n()],I.prototype,"tx",2),z([n()],I.prototype,"success",2),I=z([d("pass-item")],I);var U=Object.defineProperty,N=Object.getOwnPropertyDescriptor,_=(t,e,i,s)=>{for(var a,r=s>1?void 0:s?N(e,i):e,o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&U(e,i,r),r};let F=t("ViewPasses",class extends(i(".Passes{height:300px;height:100%;--tw-bg-opacity: 1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.pass-list{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));grid-gap:1rem;gap:1rem}@media (min-width: 1024px){.pass-list{grid-template-columns:repeat(2,minmax(0,1fr))}}\n")){constructor(){super(...arguments),this.bindStore=new p(this,s),this.name="",this.passes=[],this.pending=!1,this.ts=0}get bridge(){return s.bridge}async getUserPassList(){if(s.notReady)return;this.pending=!0;const{account:t}=s.bridge,e=await u();try{const i=await b(t,!0),s=await v();let a=await Promise.all(i.map((async t=>{const[i,a,r]=t,o=h(i,0),n=s[a]??[],d={id:o,cate:n[0],hash:r,meta:{}},p=await Promise.all([x(r),e.tokenURI(o)]);d.name=p[0],d.len=`${n[1]}`;try{d.meta=await(await fetch(p[1])).json()}catch(c){}return d})));this.passes=a.sort(((t,e)=>t.id-e.id)).sort(((t,e)=>t.name?e.name?t.id-e.id:-1:1))}catch(i){console.log(i,"get passess failed"),this.passes=[]}finally{this.ts++,this.pending=!1}}get empty(){return this.ts&&!this.passes.length}connectedCallback(){super.connectedCallback(),this.getUserPassList()}render(){return r`<div class="passes py-4"><div class="lg_w-3/5 my-8 mx-3 lg_mx-auto"><section><p class="text-base mb-2">Note</p><ul class="note list-disc mx-4"><li>You can only mint one Lock Pass for one wallet address.</li><li>Once you successfully locked your name. Your name will be reserved for 7 days after the official launch(22nd Dec,2022). Those locked but unminted names will be released to the public pool afterwards.</li></ul><a href="${"https://twitter.com/DoidFoundation"}" target="_blank" rel="noopener" class="uri inline-flex my-2 text-base">Follow DOID Twitter and stay connected</a></section>${l(s.noAccount,(()=>r`<div class="my-8 text-center"><connect-wallet-btn></connect-wallet-btn></div>`),(()=>r`<section class="mt-6"><h2 class="my-4 text-xl">My Lock Pass</h2><div class="py-4">${l(this.empty,(()=>r`No passes yet.`),(()=>r`${l(this.pending,(()=>r`<i class="mdi mdi-loading mr-1"></i>Loading...`),(()=>r`<div class="pass-list">${m(this.passes,(t=>r`<pass-item key="${t.id}" .item="${t}"></pass-item>`))}</div>`))}`))}</div></section><section class="mt-6"><h2 class="text-xl mb-2">Share Lock Pass Invitations</h2>${this.passes.length?r`<pass-share></pass-share>`:r``}</section>`))}</div></div>`}});_([c()],F.prototype,"name",2),_([n()],F.prototype,"passes",2),_([n()],F.prototype,"pending",2),_([n()],F.prototype,"ts",2),t("ViewPasses",F=_([d("view-passes")],F))}}}));
